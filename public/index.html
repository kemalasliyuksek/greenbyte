<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenByte Sera Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* GreenByte branding için ek stiller */
        .greenbyte-logo {
            display: flex;
            align-items: center;
        }
        
        /* Sidebar marka alanı için flex düzenleme */
        .sidebar-brand {
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }
        
        /* Toggle menü düğmesi için stil */
        .toggle-menu {
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .toggle-menu:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        /* Ana içerik bölümünü düzenlemek için */
        .main-content {
            transition: all var(--animation-speed) ease;
            min-height: 100vh;
            width: calc(100% - 250px);
        }
        
        /* Sayfa içeriği için padding düzeltmesi */
        .page-content {
            padding-top: 10px;
        }

        /* Mobil görünümde başlık düzeltmeleri */
        @media (max-width: 768px) {
            .dashboard-title {
                font-size: 1.2rem;
                margin: 1rem 0;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" style="width: 250px;">
        <div class="sidebar-brand d-flex align-items-center">
            <i class="fas fa-leaf fa-2x me-2"></i>
            <h2>GreenByte</h2>
        </div>
        <div class="sidebar-menu">
            <a href="#" class="sidebar-item active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="sidebar-item" data-page="temperature">
                <i class="fas fa-thermometer-half"></i>
                <span>Sıcaklık Kontrol</span>
            </a>
            <a href="#" class="sidebar-item" data-page="humidity">
                <i class="fas fa-tint"></i>
                <span>Nem Kontrol</span>
            </a>
            <a href="#" class="sidebar-item" data-page="lighting">
                <i class="fas fa-lightbulb"></i>
                <span>Aydınlatma</span>
            </a>
            <a href="#" class="sidebar-item" data-page="water">
                <i class="fas fa-water"></i>
                <span>Su Deposu</span>
            </a>
            <a href="#" class="sidebar-item" data-page="plants">
                <i class="fas fa-seedling"></i>
                <span>Bitki Durumu</span>
            </a>
            <a href="#" class="sidebar-item" data-page="history">
                <i class="fas fa-history"></i>
                <span>Geçmiş Veriler</span>
            </a>
            <a href="#" class="sidebar-item" data-page="settings">
                <i class="fas fa-cog"></i>
                <span>Ayarlar</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" style="margin-left: 250px;">
        <div class="topbar">
            <div class="toggle-menu">
                <i class="fas fa-bars"></i>
            </div>
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Ara...">
            </div>
            <div class="user-info">
                <div class="user-avatar">
                    <span>AS</span>
                </div>
                <div class="user-details">
                    <div class="user-name">Admin</div>
                    <div class="user-role">Yönetici</div>
                </div>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div id="dashboard-content" class="page-content">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">GreenByte Sera Kontrol Paneli</h1>
                
                <!-- Overview Cards -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="dashboard-card animate-fadein delay-1">
                            <div class="card-icon">
                                <i class="fas fa-thermometer-half"></i>
                            </div>
                            <div class="card-title">SICAKLIK</div>
                            <div class="card-value" id="temp-value">--°C</div>
                            <div class="card-change" id="temp-change">
                                <i class="fas fa-arrow-up"></i> <span>--°C (--s)</span>
                            </div>
                            <div class="chart-bg-icon">
                                <i class="fas fa-thermometer-half"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="dashboard-card animate-fadein delay-2">
                            <div class="card-icon">
                                <i class="fas fa-tint"></i>
                            </div>
                            <div class="card-title">NEM</div>
                            <div class="card-value" id="humidity-value">--%</div>
                            <div class="card-change" id="humidity-change">
                                <i class="fas fa-arrow-down"></i> <span>--% (--d)</span>
                            </div>
                            <div class="chart-bg-icon">
                                <i class="fas fa-tint"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="dashboard-card animate-fadein delay-3">
                            <div class="card-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="card-title">IŞIK SEVİYESİ</div>
                            <div class="card-value" id="light-value">-- lux</div>
                            <div class="card-change" id="light-change">
                                <i class="fas fa-arrow-up"></i> <span>-- lux (--d)</span>
                            </div>
                            <div class="chart-bg-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="dashboard-card animate-fadein delay-4">
                            <div class="card-icon">
                                <i class="fas fa-water"></i>
                            </div>
                            <div class="card-title">TOPRAK NEMİ</div>
                            <div class="card-value" id="soil-value">--%</div>
                            <div class="card-change" id="soil-change">
                                <i class="fas fa-arrow-up"></i> <span>--% (--s)</span>
                            </div>
                            <div class="chart-bg-icon">
                                <i class="fas fa-water"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Charts Section -->
                <div class="row mt-4">
                    <div class="col-lg-8">
                        <div class="dashboard-card animate-fadein">
                            <h5>24 Saatlik Sıcaklık ve Nem Grafiği</h5>
                            <div class="chart-container">
                                <canvas id="tempHumidityChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="dashboard-card animate-fadein">
                            <h5>Sistem Durumu</h5>
                            <div class="mt-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="status-indicator status-active"></span>
                                        <span>Sıcaklık Kontrol</span>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="temp-control-toggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="status-indicator status-active"></span>
                                        <span>Nem Kontrol</span>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="humidity-control-toggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="status-indicator status-active"></span>
                                        <span>Işık Kontrol</span>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="light-control-toggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="status-indicator" id="water-system-status"></span>
                                        <span>Sulama Sistemi</span>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="water-system-toggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <span class="status-indicator status-active"></span>
                                        <span>Havalandırma</span>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="ventilation-toggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Row -->
                <div class="row mt-4">
                    <div class="col-lg-4">
                        <div class="dashboard-card animate-fadein">
                            <h5>Bitki Gelişim Durumu</h5>
                            <div class="mt-3" id="bitki-gelistirme-container">
                                <div class="mb-3">
                                    <small>Veri yükleniyor...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="dashboard-card animate-fadein">
                            <h5>CO2 Seviyesi</h5>
                            <div class="gauge-container mt-3">
                                <div class="gauge-bg">
                                    <div class="gauge-fill" id="co2Fill" style="height: 60%;"></div>
                                    <div class="gauge-indicator" id="co2Indicator" style="transform: rotate(108deg);"></div>
                                    <div class="gauge-center"></div>
                                </div>
                                <div class="gauge-value" id="co2-value">-- ppm</div>
                                <div class="gauge-label">Optimize Seviye: 800-1200 ppm</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="dashboard-card animate-fadein">
                            <h5>Su Deposu Seviyesi</h5>
                            <div class="gauge-container mt-3">
                                <div class="gauge-bg">
                                    <div class="gauge-fill" id="waterLevelFill" style="height: 0%;"></div>
                                    <div class="gauge-indicator" id="waterLevelIndicator" style="transform: rotate(0deg);"></div>
                                    <div class="gauge-center"></div>
                                </div>
                                <div class="gauge-value" id="water-level-value">--%</div>
                                <div class="gauge-label" id="water-level-status">Durum: --</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Activity and Alerts -->
                <div class="row mt-4 mb-5">
                    <div class="col-lg-6">
                        <div class="dashboard-card animate-fadein">
                            <h5>Son Aktiviteler</h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Tarih</th>
                                            <th>İşlem</th>
                                            <th>Durum</th>
                                        </tr>
                                    </thead>
                                    <tbody id="activity-log">
                                        <tr>
                                            <td colspan="3" class="text-center">Henüz aktivite kaydı yok</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="dashboard-card animate-fadein">
                            <h5>Uyarılar ve Bildirimler</h5>
                            <div id="alerts-container">
                                <div class="alert alert-info d-flex align-items-center">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <div>
                                        <strong>Sistem Hazır:</strong> Sensörlerden veri bekleniyor...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sıcaklık Kontrol Sayfası -->
        <div id="temperature-content" class="page-content temp-humid-page" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Sıcaklık Kontrol</h1>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="dashboard-card">
                            <h5>Sıcaklık Ayarları</h5>
                            <div>
                                <div class="mb-3">
                                    <label for="tempRange" class="form-label">İstenen Sıcaklık: <span id="tempValue">24</span>°C</label>
                                    <input type="range" class="form-range" min="15" max="35" value="24" id="tempRange" oninput="document.getElementById('tempValue').textContent = this.value">
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="autoTemp" checked>
                                    <label class="form-check-label" for="autoTemp">Otomatik Sıcaklık Kontrolü</label>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-2">
                                        <label for="minTemp" class="form-label">Minimum Sıcaklık</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="minTemp" value="20">
                                            <span class="input-group-text">°C</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-2">
                                        <label for="maxTemp" class="form-label">Maksimum Sıcaklık</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="maxTemp" value="28">
                                            <span class="input-group-text">°C</span>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-primary mt-2" onclick="saveSettings('temperature')">Ayarları Kaydet</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 side-cards">
                        <div class="dashboard-card">
                            <h5>Mevcut Sıcaklık</h5>
                            <div class="sensor-display">
                                <i class="fas fa-thermometer-half text-primary"></i>
                                <h2 id="temperature-display">--°C</h2>
                                <p class="text-muted" id="temperature-last-update">Son Güncelleme: --</p>
                            </div>
                        </div>
                        <div class="dashboard-card mt-3">
                            <h5>Hızlı Kontroller</h5>
                            <div class="quick-controls">
                                <button class="btn btn-success mb-2 w-100" onclick="updateSensorValue('temperature', 22)">Optimum (22°C)</button>
                                <button class="btn btn-outline-warning w-100" onclick="updateSensorValue('temperature', 18)">Gece Modu (18°C)</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Nem Kontrol Sayfası -->
        <div id="humidity-content" class="page-content temp-humid-page" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Nem Kontrolü</h1>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="dashboard-card">
                            <h5>Nem Ayarları</h5>
                            <div>
                                <div class="mb-3">
                                    <label for="humidityRange" class="form-label">İstenen Nem Oranı: <span id="humidityValue">65</span>%</label>
                                    <input type="range" class="form-range" min="40" max="90" value="65" id="humidityRange" oninput="document.getElementById('humidityValue').textContent = this.value">
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="autoHumidity" checked>
                                    <label class="form-check-label" for="autoHumidity">Otomatik Nem Kontrolü</label>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-2">
                                        <label for="minHumidity" class="form-label">Minimum Nem</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="minHumidity" value="55">
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-2">
                                        <label for="maxHumidity" class="form-label">Maksimum Nem</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="maxHumidity" value="75">
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-primary mt-2" onclick="saveSettings('humidity')">Ayarları Kaydet</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 side-cards">
                        <div class="dashboard-card">
                            <h5>Mevcut Nem</h5>
                            <div class="sensor-display">
                                <i class="fas fa-tint text-primary"></i>
                                <h2 id="humidity-display">--%</h2>
                                <p class="text-muted" id="humidity-last-update">Son Güncelleme: --</p>
                            </div>
                        </div>
                        <div class="dashboard-card mt-3">
                            <h5>Hızlı Kontroller</h5>
                            <div class="quick-controls">
                                <button class="btn btn-success mb-2 w-100" onclick="updateSensorValue('humidity', 70)">Yüksek Nem (70%)</button>
                                <button class="btn btn-outline-warning w-100" onclick="updateSensorValue('humidity', 60)">Genel (60%)</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Su Deposu Sayfası -->
        <div id="water-content" class="page-content temp-humid-page" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Su Deposu Kontrolü</h1>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="dashboard-card">
                            <h5>Su Deposu Durumu</h5>
                            <div class="chart-container">
                                <canvas id="waterLevelHistoryChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 side-cards">
                        <div class="dashboard-card">
                            <h5>Mevcut Su Seviyesi</h5>
                            <div class="sensor-display">
                                <i class="fas fa-water text-primary"></i>
                                <h2 id="water-level-display">--%</h2>
                                <p class="text-muted" id="water-level-last-update">Son Güncelleme: --</p>
                            </div>
                        </div>
                        <div class="dashboard-card mt-3">
                            <h5>Su Seviyesi Durumu</h5>
                            <div class="alert alert-info" id="water-level-alert">
                                Su seviyesi bilgisi yükleniyor...
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="autoWaterFill" checked>
                                <label class="form-check-label" for="autoWaterFill">Otomatik Su Doldurma</label>
                            </div>
                            <button class="btn btn-primary w-100" id="manual-water-fill">Manuel Su Doldurma</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Aydınlatma Sayfası -->
        <div id="lighting-content" class="page-content temp-humid-page" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Aydınlatma Kontrolü</h1>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="dashboard-card">
                            <h5>Aydınlatma Ayarları</h5>
                            <div>
                                <div class="mb-3">
                                    <label for="lightRange" class="form-label">İstenen Işık Seviyesi: <span id="lightValue">70</span>%</label>
                                    <input type="range" class="form-range" min="0" max="100" value="70" id="lightRange" oninput="document.getElementById('lightValue').textContent = this.value">
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="autoLight" checked>
                                    <label class="form-check-label" for="autoLight">Otomatik Işık Kontrolü</label>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="lightOnTime" class="form-label">Işık Açılma Saati</label>
                                        <input type="time" class="form-control" id="lightOnTime" value="06:00">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="lightOffTime" class="form-label">Işık Kapanma Saati</label>
                                        <input type="time" class="form-control" id="lightOffTime" value="18:00">
                                    </div>
                                </div>
                                <button class="btn btn-primary mt-2" onclick="saveSettings('lighting')">Ayarları Kaydet</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 side-cards">
                        <div class="dashboard-card">
                            <h5>Mevcut Işık Seviyesi</h5>
                            <div class="sensor-display">
                                <i class="fas fa-lightbulb text-primary"></i>
                                <h2 id="light-level-display">--%</h2>
                                <p class="text-muted" id="light-level-last-update">Son Güncelleme: --</p>
                            </div>
                        </div>
                        <div class="dashboard-card mt-3">
                            <h5>Hızlı Kontroller</h5>
                            <div class="quick-controls">
                                <button class="btn btn-success mb-2 w-100" onclick="updateSensorValue('light', 100)">Tam Güç (%100)</button>
                                <button class="btn btn-outline-primary mb-2 w-100" onclick="updateSensorValue('light', 50)">Orta (%50)</button>
                                <button class="btn btn-outline-warning w-100" onclick="updateSensorValue('light', 0)">Kapalı (%0)</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bitki Durumu Sayfası -->
        <div id="plants-content" class="page-content" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Bitki Durumu</h1>
                <div class="row" id="bitki-durum-container">
                    <div class="col-12">
                        <div class="dashboard-card">
                            <h5>Bitki Bilgileri Yükleniyor...</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Geçmiş Veriler Sayfası -->
        <div id="history-content" class="page-content" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Geçmiş Veriler</h1>
                <div class="dashboard-card">
                    <h5>Tarih Aralığı Seçimi</h5>
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <label for="historyType" class="form-label">Veri Tipi</label>
                            <select class="form-select" id="historyType">
                                <option value="all">Tüm Veriler</option>
                                <option value="temperature">Sıcaklık</option>
                                <option value="humidity">Nem</option>
                                <option value="light">Işık Seviyesi</option>
                                <option value="soil">Toprak Nemi</option>
                                <option value="water">Su Seviyesi</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="historyPeriod" class="form-label">Periyot</label>
                            <select class="form-select" id="historyPeriod">
                                <option value="24">Son 24 Saat</option>
                                <option value="48">Son 48 Saat</option>
                                <option value="168">Son Hafta</option>
                                <option value="720">Son Ay</option>
                            </select>
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                            <button class="btn btn-primary w-100" onclick="fetchHistoricalDataByPeriod()">Verileri Getir</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="historyChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ayarlar Sayfası -->
        <div id="settings-content" class="page-content" style="display: none;">
            <div class="container-fluid px-4">
                <h1 class="dashboard-title animate-fadein">Ayarlar</h1>
                <div class="dashboard-card">
                    <h5>Sistem Ayarları</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="seraAdi" class="form-label">Sera Adı</label>
                            <input type="text" class="form-control" id="seraAdi" value="Sera 1">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="seraKonum" class="form-label">Sera Konumu</label>
                            <input type="text" class="form-control" id="seraKonum" placeholder="Örn: Bursa, Merkez">
                        </div>
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="bildirimAktif" checked>
                        <label class="form-check-label" for="bildirimAktif">Bildirimler Aktif</label>
                    </div>
                    <button class="btn btn-primary" onclick="saveSettings('system')">Ayarları Kaydet</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="script.js"></script>
</body>
</html>